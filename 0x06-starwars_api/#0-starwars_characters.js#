#!/usr/bin/node

const axios = require('axios');

async function getMovieCharacters(movieId) {
    try {
        const filmResponse = await axios.get(`https://swapi.dev/api/films/${movieId}/`);
        const characterUrls = filmResponse.data.characters;

        const characterNames = await Promise.all(characterUrls.map(async (charUrl) => {
            const charResponse = await axios.get(charUrl);
            return charResponse.data.name;
        }));

        return characterNames;
    } catch (error) {
        console.error("Error:", error.message);
        return [];
    }
}

async function main() {
    const args = process.argv.slice(2);
    if (args.length !== 1) {
        console.log("Usage: node script.js <movie_id>");
        return;
    }

    const movieId = args[0];
    const characterNames = await getMovieCharacters(movieId);

    characterNames.forEach((name) => {
        console.log(name);
    });
}

main();
